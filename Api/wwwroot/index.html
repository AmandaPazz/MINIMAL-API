<!DOCTYPE html>

<!-- Declara que este √© um documento HTML5 -->
<html lang="pt-BR">
<!-- Define o idioma da p√°gina como portugu√™s brasileiro -->
<head>
    <!-- Cabe√ßalho da p√°gina - cont√©m metadados e configura√ß√µes -->
    <meta charset="UTF-8">
    <!-- Define a codifica√ß√£o de caracteres como UTF-8 (suporta acentos) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Configura a p√°gina para funcionar bem em dispositivos m√≥veis -->
    <title>Minimal API - Gerenciamento de Ve√≠culos</title>
    <!-- T√≠tulo que aparece na aba do navegador -->
    <link rel="icon" type="image/png" href="/resources/MainIcon.png">
    <!-- Define o √≠cone (favicon) que aparece na aba do navegador -->
    <link rel="stylesheet" href="styles.css">
    <!-- Carrega o arquivo CSS que cont√©m todos os estilos visuais -->
</head>
<body>
    <!-- ========== TELA DE LOGIN ========== -->
    <!-- Esta √© a primeira tela que o usu√°rio v√™ quando acessa a aplica√ß√£o -->
    <div id="loginScreen" class="screen active">
        <!-- 
            id="loginScreen" - Identificador √∫nico para este elemento (usado no JavaScript)
            class="screen" - Classe CSS que esconde/mostra telas
            class="active" - Classe que faz esta tela aparecer (outras telas n√£o t√™m "active")
        -->
        <div class="login-container">
            <!-- Container que centraliza o card de login na tela -->
            <div class="login-card">
                <!-- Card branco que cont√©m o formul√°rio de login -->
                
                <!-- Logo/√çcone da aplica√ß√£o -->
                <div class="logo-container">
                    <!-- Container que centraliza o √≠cone -->
                    <img src="/resources/MainIcon.png" alt="Minimal API" class="main-icon">
                    <!-- 
                        src="/resources/MainIcon.png" - Caminho da imagem (servida pela API)
                        alt="Minimal API" - Texto alternativo se a imagem n√£o carregar
                        class="main-icon" - Classe CSS que define tamanho e estilo do √≠cone
                    -->
                </div>
                
                <!-- T√≠tulo da aplica√ß√£o -->
                <h1>Minimal API</h1>
                <!-- Tag h1 = t√≠tulo principal (maior destaque) -->
                
                <!-- Subt√≠tulo -->
                <p class="subtitle">Sistema de Gerenciamento de Ve√≠culos</p>
                <!-- Tag p = par√°grafo de texto -->
                
                <!-- Formul√°rio de Login -->
                <form id="loginForm">
                    <!-- 
                        id="loginForm" - Identificador para o JavaScript capturar o evento de submit
                        Quando o usu√°rio clica em "Entrar", o JavaScript intercepta e faz a requisi√ß√£o
                    -->
                    
                    <!-- Campo de Email -->
                    <div class="form-group">
                        <!-- Container que agrupa label e input -->
                        <label for="email">Email</label>
                        <!-- Label = texto descritivo do campo (for="email" conecta ao input) -->
                        <input type="email" id="email" placeholder="admin@teste.com" required>
                        <!-- 
                            type="email" - Valida se √© um email v√°lido
                            id="email" - Identificador para JavaScript pegar o valor
                            placeholder - Texto de exemplo que aparece quando o campo est√° vazio
                            required - Obriga o usu√°rio a preencher antes de enviar
                        -->
                    </div>
                    
                    <!-- Campo de Senha -->
                    <div class="form-group">
                        <label for="senha">Senha</label>
                        <input type="password" id="senha" placeholder="admin" required>
                        <!-- 
                            type="password" - Esconde o texto digitado (mostra apenas ‚Ä¢‚Ä¢‚Ä¢)
                            id="senha" - Identificador para JavaScript pegar o valor
                        -->
                    </div>
                    
                    <!-- Bot√£o de Submit -->
                    <button type="submit" class="btn btn-primary">Entrar</button>
                    <!-- 
                        type="submit" - Quando clicado, envia o formul√°rio
                        class="btn btn-primary" - Estilos CSS (bot√£o azul/prim√°rio)
                    -->
                </form>
                
                <!-- √Årea de Mensagens de Erro -->
                <div id="loginError" class="error-message"></div>
                <!-- 
                    id="loginError" - Onde o JavaScript mostra mensagens de erro
                    Inicialmente vazio, aparece quando h√° erro no login
                -->
            </div>
        </div>
    </div>

    <!-- ========== TELA PRINCIPAL (Ap√≥s Login) ========== -->
    <!-- Esta tela s√≥ aparece depois que o usu√°rio faz login com sucesso -->
    <div id="mainScreen" class="screen">
        <!-- 
            id="mainScreen" - Identificador da tela principal
            N√£o tem "active" inicialmente, ent√£o est√° escondida
            O JavaScript adiciona "active" quando o login √© bem-sucedido
        -->
        
        <!-- Cabe√ßalho da Aplica√ß√£o -->
        <header class="header">
            <!-- Tag sem√¢ntica HTML5 para cabe√ßalho -->
            <div class="header-content">
                <!-- Container que organiza o conte√∫do do header -->
                
                <!-- T√≠tulo e √çcone do Header -->
                <div class="header-title">
                    <!-- Container que agrupa √≠cone e t√≠tulo -->
                    <img src="/resources/MainIcon.png" alt="√çcone" class="header-icon">
                    <!-- √çcone menor que aparece ao lado do t√≠tulo -->
                    <h2>Gerenciamento de Ve√≠culos</h2>
                    <!-- T√≠tulo da p√°gina (h2 = segundo n√≠vel de t√≠tulo) -->
                </div>
                
                <!-- Informa√ß√µes do Usu√°rio Logado -->
                <div class="user-info">
                    <!-- Container com email do usu√°rio e bot√£o de sair -->
                    <span id="userEmail"></span>
                    <!-- 
                        id="userEmail" - Onde o JavaScript mostra o email do usu√°rio logado
                        Inicialmente vazio, preenchido ap√≥s login
                    -->
                    <button id="logoutBtn" class="btn btn-secondary">Sair</button>
                    <!-- Bot√£o que faz logout (volta para tela de login) -->
                </div>
            </div>
        </header>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Tag sem√¢ntica HTML5 para conte√∫do principal -->
            
            <!-- Barra de Ferramentas (Toolbar) -->
            <div class="toolbar">
                <!-- Container com bot√µes de a√ß√£o -->
                
                <!-- Bot√£o: Adicionar Ve√≠culo -->
                <button id="addVeiculoBtn" class="btn btn-primary">+ Adicionar Ve√≠culo</button>
                <!-- Abre modal para criar novo ve√≠culo -->
                
                <!-- Bot√£o: Atualizar Lista -->
                <button id="refreshBtn" class="btn btn-secondary" title="Atualizar">
                    <!-- 
                        Bot√£o que recarrega a lista de ve√≠culos ou administradores
                        title="Atualizar" - Texto que aparece ao passar o mouse
                    -->
                    <img src="/resources/ReloadIcon.png" alt="Atualizar" class="icon-btn" 
                         onerror="this.style.display='none'; this.nextSibling.style.display='inline'">
                    <!-- 
                        src="/resources/ReloadIcon.png" - √çcone de atualizar
                        onerror - Se a imagem n√£o carregar, esconde ela e mostra o emoji abaixo
                    -->
                    <span style="display:none">üîÑ</span>
                    <!-- Emoji de fallback (s√≥ aparece se a imagem n√£o carregar) -->
                </button>
                
                <!-- Bot√£o: Administradores (S√≥ aparece para perfil "Adm") -->
                <button id="adminBtn" class="btn btn-secondary" style="display:none;">
                    <!-- 
                        id="adminBtn" - Bot√£o para acessar gerenciamento de administradores
                        style="display:none" - Inicialmente escondido
                        O JavaScript mostra este bot√£o apenas se userPerfil === "Adm"
                    -->
                    <img src="/resources/AdminIcon.png" alt="Administradores" class="icon-btn" 
                         onerror="this.style.display='none'; this.nextSibling.style.display='inline'">
                    <!-- 
                        √çcone de administradores
                        onerror - Se a imagem n√£o carregar, esconde ela e mostra o emoji
                    -->
                    <span style="display:none">üë•</span>
                    <!-- Emoji de fallback (s√≥ aparece se a imagem n√£o carregar) -->
                    <span>Administradores</span>
                    <!-- Texto do bot√£o -->
                </button>
            </div>

            <!-- ========== SE√á√ÉO DE VE√çCULOS ========== -->
            <!-- Esta se√ß√£o mostra a lista de ve√≠culos cadastrados -->
            <div id="veiculosSection">
                <!-- 
                    id="veiculosSection" - Identificador da se√ß√£o de ve√≠culos
                    Esta √© a se√ß√£o padr√£o que aparece ap√≥s login
                -->
                
                <!-- Indicador de Carregamento -->
                <div id="loading" class="loading">Carregando...</div>
                <!-- 
                    Aparece enquanto est√° buscando dados da API
                    O JavaScript esconde quando os dados chegam
                -->
                
                <!-- Lista de Ve√≠culos (Grid) -->
                <div id="veiculosList" class="veiculos-grid"></div>
                <!-- 
                    id="veiculosList" - Onde o JavaScript insere os cards de ve√≠culos
                    Inicialmente vazio, preenchido dinamicamente pelo JavaScript
                    class="veiculos-grid" - CSS que organiza os cards em grade
                -->
                
                <!-- Estado Vazio (quando n√£o h√° ve√≠culos) -->
                <div id="emptyState" class="empty-state">
                    <!-- Aparece quando n√£o h√° ve√≠culos cadastrados -->
                    <p>Nenhum ve√≠culo cadastrado ainda.</p>
                    <button class="btn btn-primary" onclick="document.getElementById('addVeiculoBtn').click()">
                        <!-- 
                            onclick - Quando clicado, simula clique no bot√£o "Adicionar Ve√≠culo"
                            Isso abre o modal para criar o primeiro ve√≠culo
                        -->
                        Adicionar Primeiro Ve√≠culo
                    </button>
                </div>
            </div>

            <!-- ========== SE√á√ÉO DE ADMINISTRADORES ========== -->
            <!-- Esta se√ß√£o s√≥ √© acess√≠vel para usu√°rios com perfil "Adm" -->
            <div id="administradoresSection" style="display:none;">
                <!-- 
                    id="administradoresSection" - Identificador da se√ß√£o de administradores
                    style="display:none" - Inicialmente escondida
                    O JavaScript mostra quando o admin clica no bot√£o "Administradores"
                -->
                
                <!-- Barra de Ferramentas da Se√ß√£o de Administradores -->
                <div class="toolbar">
                    <!-- Bot√£o: Adicionar Administrador -->
                    <button id="addAdminBtn" class="btn btn-primary">+ Adicionar Administrador</button>
                    <!-- Abre modal para criar novo administrador -->
                    
                    <!-- Bot√£o: Voltar para Ve√≠culos -->
                    <button id="backToVeiculosBtn" class="btn btn-secondary" title="Voltar para Ve√≠culos">
                        <!-- 
                            Bot√£o que volta para a se√ß√£o de ve√≠culos
                            title - Texto que aparece ao passar o mouse (tooltip)
                        -->
                        <span>‚Üê</span>
                        <!-- Apenas seta para esquerda, sem texto -->
                    </button>
                </div>
                
                <!-- Indicador de Carregamento -->
                <div id="adminLoading" class="loading">Carregando...</div>
                <!-- Aparece enquanto busca lista de administradores -->
                
                <!-- Lista de Administradores (Grid) -->
                <div id="administradoresList" class="veiculos-grid"></div>
                <!-- Onde o JavaScript insere os cards de administradores -->
                
                <!-- Estado Vazio (quando n√£o h√° administradores) -->
                <div id="adminEmptyState" class="empty-state">
                    <p>Nenhum administrador cadastrado ainda.</p>
                    <button class="btn btn-primary" onclick="document.getElementById('addAdminBtn').click()">
                        Adicionar Primeiro Administrador
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- ========== MODAL DE ADMINISTRADOR ========== -->
    <!-- Modal = janela popup que aparece sobre a tela principal -->
    <div id="adminModal" class="modal">
        <!-- 
            id="adminModal" - Identificador do modal de administrador
            class="modal" - CSS que cria o fundo escuro e centraliza o conte√∫do
            Inicialmente escondido, aparece quando o JavaScript adiciona class="show"
        -->
        <div class="modal-content">
            <!-- Container branco que cont√©m o formul√°rio -->
            
            <!-- Cabe√ßalho do Modal -->
            <div class="modal-header">
                <!-- Container com t√≠tulo e bot√£o fechar -->
                <h3 id="adminModalTitle">Adicionar Administrador</h3>
                <!-- 
                    id="adminModalTitle" - T√≠tulo muda entre "Adicionar" e "Editar"
                    O JavaScript altera este texto dinamicamente
                -->
                <button class="close-btn" id="closeAdminModal">&times;</button>
                <!-- 
                    Bot√£o X para fechar o modal
                    &times; = s√≠mbolo de multiplica√ß√£o (X)
                -->
            </div>
            
            <!-- Formul√°rio de Administrador -->
            <form id="adminForm">
                <!-- 
                    id="adminForm" - Identificador para JavaScript capturar submit
                    Quando salva, envia POST (novo) ou PUT (editar) para API
                -->
                
                <!-- Campo Oculto: ID do Administrador -->
                <input type="hidden" id="adminId">
                <!-- 
                    type="hidden" - Campo invis√≠vel que armazena o ID
                    Vazio = novo administrador | Com ID = editar existente
                -->
                
                <!-- Campo: Email -->
                <div class="form-group">
                    <label for="adminEmail">Email</label>
                    <input type="email" id="adminEmail" placeholder="exemplo@teste.com" required>
                    <!-- Campo de email do administrador -->
                </div>
                
                <!-- Campo: Senha -->
                <div class="form-group">
                    <label for="adminSenha">Senha</label>
                    <input type="password" id="adminSenha" placeholder="Senha" required>
                    <!-- Campo de senha (escondido ao digitar) -->
                </div>
                
                <!-- Campo: Perfil (Dropdown) -->
                <div class="form-group">
                    <label for="adminPerfil">Perfil</label>
                    <select id="adminPerfil" required>
                        <!-- 
                            select = dropdown (lista suspensa)
                            required = obrigat√≥rio preencher
                        -->
                        <option value="Adm">Administrador</option>
                        <!-- Op√ß√£o 1: Perfil de administrador (acesso total) -->
                        <option value="Editor">Editor</option>
                        <!-- Op√ß√£o 2: Perfil de editor (acesso limitado) -->
                    </select>
                </div>
                
                <!-- √Årea de Erros do Formul√°rio -->
                <div id="adminFormError" class="error-message"></div>
                <!-- Onde aparecem mensagens de erro de valida√ß√£o -->
                
                <!-- Bot√µes de A√ß√£o do Modal -->
                <div class="modal-actions">
                    <!-- Container com bot√µes Cancelar e Salvar -->
                    <button type="button" class="btn btn-secondary" id="cancelAdminBtn">Cancelar</button>
                    <!-- 
                        type="button" - N√£o envia o formul√°rio, apenas fecha o modal
                    -->
                    <button type="submit" class="btn btn-primary">Salvar</button>
                    <!-- type="submit" - Envia o formul√°rio quando clicado -->
                </div>
            </form>
        </div>
    </div>

    <!-- ========== MODAL DE VE√çCULO ========== -->
    <!-- Modal para adicionar ou editar ve√≠culos -->
    <div id="veiculoModal" class="modal">
        <!-- Similar ao modal de administrador, mas para ve√≠culos -->
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Adicionar Ve√≠culo</h3>
                <!-- T√≠tulo muda entre "Adicionar" e "Editar" -->
                <button class="close-btn" id="closeModal">&times;</button>
                <!-- Bot√£o X para fechar -->
            </div>
            
            <!-- Formul√°rio de Ve√≠culo -->
            <form id="veiculoForm">
                <!-- Campo Oculto: ID do Ve√≠culo -->
                <input type="hidden" id="veiculoId">
                <!-- Vazio = novo | Com ID = editar -->
                
                <!-- Campo: Nome do Ve√≠culo -->
                <div class="form-group">
                    <label for="nome">Nome do Ve√≠culo</label>
                    <input type="text" id="nome" placeholder="Ex: Civic" required>
                    <!-- Campo de texto para nome do ve√≠culo -->
                </div>
                
                <!-- Campo: Marca -->
                <div class="form-group">
                    <label for="marca">Marca</label>
                    <input type="text" id="marca" placeholder="Ex: Honda" required>
                    <!-- Campo de texto para marca do ve√≠culo -->
                </div>
                
                <!-- Campo: Ano -->
                <div class="form-group">
                    <label for="ano">Ano</label>
                    <input type="number" id="ano" placeholder="Ex: 2024" min="1950" required>
                    <!-- 
                        type="number" - Aceita apenas n√∫meros
                        min="1950" - Valor m√≠nimo permitido
                    -->
                </div>
                
                <!-- √Årea de Erros -->
                <div id="formError" class="error-message"></div>
                
                <!-- Bot√µes de A√ß√£o -->
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ========== SCRIPT JAVASCRIPT ========== -->
    <!-- Carrega o arquivo JavaScript que cont√©m toda a l√≥gica da aplica√ß√£o -->
    <script src="app.js"></script>
    <!-- 
        src="app.js" - Caminho do arquivo JavaScript
        Este script √© executado ap√≥s o HTML carregar
        Cont√©m todas as fun√ß√µes de comunica√ß√£o com API e manipula√ß√£o da interface
    -->
</body>
</html>
